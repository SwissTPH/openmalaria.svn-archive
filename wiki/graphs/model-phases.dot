// graphviz description of model-phases diagram.
// Copyright 2010 Swiss Tropical Institute
// Licence: GPL 2.1 or later
// Author: Diggory Hardy

// dot -Tpng model-phases.dot -omodel-phases.png -Kdot
// dot -Tpng model-phases.dot -omodel-phases.png -Kfdp
digraph {
    edge[ fontcolor="#666666" ]
    subgraph cluster_human_cycle {
	label="within-host model"
	
	subgraph cluster_infection {
	    label="infection model"
	    sporozoites [label="liver stage"]
	    merozoites[ label="blood stage" ]
	}
	
	gametocytes;
	immunity[ label="natural\nimmunity" ]
    }
    
    subgraph cluster_transmission {
	label="transmission model"
	infected_mosq[label="infected\nmosquitoes"]
	infectious_mosq[label="infectious\nmosquitoes"]
    }
    subgraph cluster_inf_inc {
	label="infection incidence model"
	new_inf[label="new infection"]
    }
    
    subgraph cluster_pathogenesis {
	label="pathogenesis"
	path_event[label="event|<UC> uncomplicated|severe", shape=record]
    }
    subgraph cluster_clinical {
	label="clinical model"
	state[label="state|<h>healthy|<UC> uncomplicated|severe", shape=record]
	treat_seeking[label="treatment\nseeking"]
	outcome[label="<o>outcome|<r>recover|<s>sequelae|<d>death", shape=record]
    }
    subgraph cluster_drug{
	label="drug model"
	medication
    }
    
    sporozoites -> merozoites -> immunity -> merozoites
    merozoites -> gametocytes //[ label="gametocyte formation" ]
    gametocytes -> infected_mosq[label="human\ninfectiousness"];
    infected_mosq -> infectious_mosq[label="sporozoite development"]
    infectious_mosq -> new_inf[label="EIR"]
    new_inf -> sporozoites 
    
    merozoites -> path_event
    path_event:UC -> state:UC
    path_event:severe -> state:severe
    state:UC -> treat_seeking
    state:severe -> treat_seeking
    treat_seeking -> outcome:o
    outcome:r -> state:h
    outcome:s -> state:h
    treat_seeking -> medication
    medication -> merozoites
}
